---
author: ptarjan
layout: post
title: HHVM 3.0.0
category: blog
permalink: /blog/4349/hhvm-3-0-0
comments:
- id: 6281
  author: Radu
  date: '2014-03-28 13:42:38 +0000'
  date_gmt: '2014-03-28 20:42:38 +0000'
  content: "Congratulations, all these improvements obviously take a lot of effort;
    you should feel proud :) .\r\n\r\nPlease don't forget to keep updating and completing
    the documentation about Hack, it seems people are really interested in it."
- id: 6287
  author: Gaurav
  date: '2014-03-28 14:18:18 +0000'
  date_gmt: '2014-03-28 21:18:18 +0000'
  content: "Are there any performance benchmarks between Hack on HHVM vs PHP on HHVM?\r\nHack
    being statically typed language should show better results than PHP."
- id: 6317
  author: Facebook releases HipHop (HHVM) 3.0, adds mysqli and support for Hack language
    - Dev Metal
  date: '2014-03-28 15:29:58 +0000'
  date_gmt: '2014-03-28 22:29:58 +0000'
  content: "[&#8230;] improved fork of the entire PHP language) a few days ago, Facebook&#8217;s
    engineering team has shipped HipHop (HHVM) 3.0 today. Beside lots of improvements,
    the most interesting new features are the native integration of the [&#8230;]"
- id: 6371
  author: HHVM 3.0 发布，执行 PHP 的虚拟机 &#124; 我爱互联网
  date: '2014-03-28 18:01:41 +0000'
  date_gmt: '2014-03-29 01:01:41 +0000'
  content: "[&#8230;] HHVM 3.0 发布了，这是一个主要的发行版本，最主要的是增加对 Hack 语言的支持。详细的说明请看这里。 [&#8230;]"
- id: 6383
  author: wwbmmm
  date: '2014-03-28 18:21:06 +0000'
  date_gmt: '2014-03-29 01:21:06 +0000'
  content: 赞！
- id: 6443
  author: Taking HHVM 3.0 for a spin | J&aacute;nos P&aacute;sztor
  date: '2014-03-28 23:25:28 +0000'
  date_gmt: '2014-03-29 06:25:28 +0000'
  content: "[&#8230;] even a day has passed since Facebook released a new version
    of their PHP virtual machine called HHVM. If you don&#8217;t know HHVM and you&#8217;re
    coding PHP, you&#8217;ve [&#8230;]"
- id: 6449
  author: Taking HHVM 3.0.0 for a spin | J&aacute;nos P&aacute;sztor
  date: '2014-03-28 23:26:17 +0000'
  date_gmt: '2014-03-29 06:26:17 +0000'
  content: "[&#8230;] even a day has passed since Facebook released a new version
    of their PHP virtual machine called HHVM. If you don&#8217;t know HHVM and you&#8217;re
    coding PHP, you&#8217;ve [&#8230;]"
- id: 6461
  author: Hack_Fan
  date: '2014-03-28 23:30:24 +0000'
  date_gmt: '2014-03-29 06:30:24 +0000'
  content: "I agree with @Gaurav\r\nYes, please;\r\n\"Are there any performance benchmarks
    between Hack on HHVM vs PHP on HHVM?\"\r\nAnd of course with JIT enable mode."
- id: 6485
  author: wwbmmm
  date: '2014-03-29 01:10:05 +0000'
  date_gmt: '2014-03-29 08:10:05 +0000'
  content: What about Admin Server and Satellite Servers? These are useful functionality.
    Are they available with fastcgi mode?
- id: 6497
  author: Alex
  date: '2014-03-29 02:38:00 +0000'
  date_gmt: '2014-03-29 09:38:00 +0000'
  content: "Good work guys. Can we have decimal data type into Hack? \r\nOr Hack class
    for that ?"
- id: 6707
  author: Robson
  date: '2014-03-29 16:03:22 +0000'
  date_gmt: '2014-03-29 23:03:22 +0000'
  content: "Hello, I'm testing HipHop in two sites with Wordpress and Magento and
    am fascinated, the performance is phenomenal.\r\nI started reading the documentation
    yesterday, my english is bad, and I wish someone help me understand something
    about the php.ini, please:\r\n\r\n1 - Where can I see the php directives that
    are used in HHVM?\r\n2 - If I want to change the maximum upload, just add upload_max_filesize
    = 200M to &#47; etc &#47; hhvm &#47; php.ini?\r\n3 - I installed the prebuild
    Debian, how can I install APC, for example?\r\n\r\nI apologize for the many questions."
- id: 9053
  author: Is Facebook&#8217;s HHVM Building PHP&#8217;s Coffin? | P&aacute;draic Brady
  date: '2014-03-31 12:56:18 +0000'
  date_gmt: '2014-03-31 19:56:18 +0000'
  content: "[&#8230;] HHVM 3.0 now released, it&#8217;s probably time to start talking
    about HHVM and the new Hack Language. It&#8217;s [&#8230;]"
- id: 11381
  author: Paul Tarjan
  date: '2014-04-02 00:50:41 +0000'
  date_gmt: '2014-04-02 07:50:41 +0000'
  content: The Admin Server still works but you have to put nginx in front of it.
    The Satellite servers don't work. What are you using them for?
- id: 11387
  author: Paul Tarjan
  date: '2014-04-02 00:50:56 +0000'
  date_gmt: '2014-04-02 07:50:56 +0000'
  content: Look at `num` in the hack docs
- id: 11393
  author: Paul Tarjan
  date: '2014-04-02 00:51:46 +0000'
  date_gmt: '2014-04-02 07:51:46 +0000'
  content: "1) We don't have good docs for it yet. Try things that you expect to work
    in php and report if they don't work.\r\n\r\n2) Yes.\r\n\r\n3) Everything is bundled
    in the main one already."
- id: 11399
  author: Paul Tarjan
  date: '2014-04-02 00:53:02 +0000'
  date_gmt: '2014-04-02 07:53:02 +0000'
  content: The types are erased at runtime right now, so you don't get any performance
    gains directly. They stop you from doing stilly things and forcing extra tracelet
    translations by keeping your types in order, though.
- id: 12959
  author: wwbmmm
  date: '2014-04-03 02:34:08 +0000'
  date_gmt: '2014-04-03 09:34:08 +0000'
  content: "We wan't to use Xbox Server for threading as https:&#47;&#47;github.com&#47;facebook&#47;hhvm&#47;blob&#47;master&#47;hphp&#47;doc&#47;threading
    says.\r\nOr is there any way to do parallel excution in fastcgi mode?"
- id: 13379
  author: Paul Tarjan
  date: '2014-04-03 08:37:17 +0000'
  date_gmt: '2014-04-03 15:37:17 +0000'
  content: Why can't you just use multiple requests? Are you passing a lot of state
    around? I'm sure there is a way to get xbox server working without the libevent
    server I just haven't put any time into it. I would take a PR if you sent one.
- id: 18401
  author: Jared Kipe
  date: '2014-04-06 14:41:12 +0000'
  date_gmt: '2014-04-06 21:41:12 +0000'
  content: A build &#47; repo for Ubuntu 14.04 trusty would be appreciated.  The saucy
    version works, if you eliminate the libboost requirements that are not available
    (by editing deb package).
- id: 33761
  author: Facebook发布HHVM 3.0 - joseph.org.cn - Joseph&#039;s Home
  date: '2014-04-19 03:23:48 +0000'
  date_gmt: '2014-04-19 10:23:48 +0000'
  content: "[&#8230;] 在Hack编程语言发布之后，Facebook又发布了HHVM（HipHop Virtual Machine）的3.0版本，提供了对这门新语言的支持。Facebook的工程师Paul
    Tarjan在HHVM博客上宣布了这一消息。 [&#8230;]"
- id: 43523
  author: jasper
  date: '2014-04-27 14:07:40 +0000'
  date_gmt: '2014-04-27 21:07:40 +0000'
  content: The second thing isn't working. HHVM with Nginx shows me a blank page after
    trying to upload something.
- id: 65501
  author: Utomo
  date: '2014-05-04 17:03:46 +0000'
  date_gmt: '2014-05-05 00:03:46 +0000'
  content: "May I ask,  why using hack name? \r\nIn some country hack is not good.
    \ People seeing as cracking."
- id: 217541
  author: PHP News You May Have Missed
  date: '2014-08-19 22:38:18 +0000'
  date_gmt: '2014-08-20 05:38:18 +0000'
  content: "[&#8230;] reached version 3 (finally, a sane versioning scheme &#8211;
    a rarity in the PHP world) and publicly introduced Hack, [&#8230;]"
- id: 480749
  author: HHVM auf dem n&auml;chsten Level - entwickler.de
  date: '2015-05-08 02:32:14 +0000'
  date_gmt: '2015-05-08 09:32:14 +0000'
  content: "[&#8230;] 2.0.0 &ndash; dem letzten gro&szlig;en Game Changer &ndash;
    erf&auml;hrt man von einem merklich stolzen Paul Tarjan in der offiziellen Ank&uuml;ndigung
    der HHVM 3.0.0. Und in der Tat sind die Fortschritte seit damals [&#8230;]"
---

This is a fun one! :)

At our last major version bump (2.0.0), we basically became a whole new project. We switched from a "PHP -> C++" translator to a virtual machine. This version bump (3.0.0) is a much less dramatic code shift (we're still a VM, don't worry), but this time the big announcement is that we support a new language, [Hack](http://hacklang.org/).

<!--truncate-->

I'd like to take some time to reflect on how far we've come since version 2.0.0. Back then we had a small semblance of a blog with just 8 posts from [Sara](http://hhvm.com/blog/author/sgolemon) and [Owen](http://hhvm.com/blog/author/oyamauchi). We didn't have any type of [release](https://github.com/facebook/hhvm/wiki/Release-Schedule) process; it was just whenever Sara wanted to cut one. We had a single package, for ubuntu 12.04; now we're [up to 6](https://github.com/facebook/hhvm/wiki#installing-pre-built-packages-for-hhvm). We had a bajillion tasks that largely didn't apply to the VM, so I [closed them all](http://hhvm.com/blog/575/joining-retirement-testing-and-bankruptcy). We're back up to a bajillion (well ~300), but they all are real issues that we are [plowing through](http://hhvm.com/blog/3743/hhvm-the-next-six-months). We took almost 0 pull requests, now we're over [400](https://github.com/facebook/hhvm/pulls?direction=desc&page=17&sort=created&state=closed) with [150 different contributors.](https://github.com/facebook/hhvm/graphs/contributors) We didn't really know how well we run all PHP code, and now we have a [cool framework tracking page](http://hhvm.com/frameworks/) and a community created one for [composer modules](http://hhvm.h4cc.de/). We didn't hang out with our closest 200 friends [on IRC](http://webchat.freenode.net/?channels=hhvm). You couldn't write extensions [nearly as easily](https://github.com/facebook/hhvm/wiki/Extension-API). You had to use our own webserver that spawned no end of questions for how to make rewrite rules for it, instead of the [standard fastcgi](https://github.com/facebook/hhvm/wiki/FastCGI). Oh and there wasn't even a thought about running it on [Heroku](https://blog.heroku.com/archives/2014/3/21/hacking_hack_on_heroku) or testing on [Travis](http://blog.travis-ci.com/2013-12-16-test-php-code-with-the-hiphop-vm/). It has been a big year and I can't wait to see what comes next.

Alright, enough reminiscing; there is a lot of real business in this release.




  1. The old webserver is gone. If you get something like `Uncaught exception: no factory for server type "libevent"`, you need to switch to fastcgi. Trust me, it is better for you. The package should automatically configure nginx or apache for you if it was installed before HHVM. [Read our rationale behind this decision](https://github.com/facebook/hhvm/wiki/Libevent-Removal).


  2. We are moving from `.hdf` config files to `.ini`. The default one lives in `/etc/hhvm/php.ini`. We don't support all the old options yet, so you can still use `config.hdf` for now, but be ready for it to die in the next release. All of your favorite options will go from `Foo { BarBaz = True }` to `hhvm.foo.bar_baz = true`.


  3. [Hack](http://hacklang.org/) is of course supported. Keep in mind that one of the major features of Hack is immediate feedback from the type system. This is enforced by a separate tool from HHVM itself, called `hh_server` and `hh_client`. These tools are included in the HHVM binary packages, but [need to be explicitly set up and started](http://docs.hhvm.com/manual/en/install.hack.bootstrapping.php). Also, if you have been running Hack code in the recent nightly packages, we've fixed a couple of bugs that may expose additional type errors in your code. In the future, we'll be careful to ease the transition between stable releases so projects can fix these type errors at their own pace. However, we did not do this for the transition from nightly to stable 3.0.


  4. Our most requested extension, [mysqli](http://hhvm.com/blog/3689/implementing-mysqli) is now in. Enjoy.

	  > **Update**: This extension was broken in 3.0.0 and is fixed in 3.0.1. Make sure to upgrade if you were having problems, and to remove the _`Eval.CheckReturnTypeHints`_ workaround if you were using it._


  5. Error messages [now match PHP5](https://github.com/facebook/hhvm/commit/a6c13da511f2e089657aa86ba67cf7ee3a20ea6d). We no longer have the HipHop prefix, so you don't have to bust out a rap when you miss an Exception.


Our next 4 alphabetical hiphop artists are here for your enjoyment in the full [Changelog](https://github.com/facebook/hhvm/blob/master/hphp/NEWS):

![Donald Glover](/static/images/posts/CG_Coachella.jpg)![Eminem](/static/images/posts/Eminem_DJ_Hero.jpg)![50 Cent](/static/images/posts/50_Cent_2012.jpg)![Ghostface Killah](/static/images/posts/Theghostface.jpeg)


"Ghostface Killah" 17-Mar-2014




  - Add [Hack](http://hacklang.org)




  - Remove "HipHop" from error messages




  - Add `__IsFoldable` user attribute for const-foldable functions




  - Add `__Native("NoFCallBuiltin")` UA for builtins which need an actrec




  - Add support for testing different outputs in repo mode




  - Implement remaining functionality from intl extension




  - Implement XSL extension




  - Implement Stream Filters




  - Improve `php.ini` support and get ready to kill HDF files




  - Parse config files as ini files, unless filename contains '`.hdf`'




  - Various fixes to Redis, JSON, SPL, DateTime, MySQLi, and others




  - Remove `C<T>Ref` typedefs (use const `T&` now)




  - JIT default on in command line mode




  - `gethostname()` just returns what the syscall returns (Zend compat)




  - HHBBC turned on in the build for facebook.com







"Fifty Cent" 3-Mar-2014




  - Array parameter type constraints implicitly cast collections to arrays




  - Fix issues with `feof` and `fwrite`




  - Fix issues with `sleep` and inaccessible properties




  - Dump a jemalloc pprod dump when a request hits OOM




  - Make `method_exists` work with interface inheritance




  - Fix crash in `preg_replace` with /e




  - Support filename and content type in Curl uploads




  - MySQLi fixes




  - Handle relative paths in `is_dir`




  - Add string conversion for `array_fill_keys`




  - Implement various Imagick functionality




  - Implement CUROPT_PROGRESSFUNCTION




  - Implement PHP 5.6 `__debugInfo()` magic method




  - Raise warnings when return type annotations mismatch




  - Fix nested `ArrayObject` assignment




  - Switch many ini settings to thread-time binding




  - Clean up memory stat tracking




  - Immutable collections are now prefixed with `Imm` instead of `Fixed/Frozen`




  - Clean up type parameter for CheckType-related IR opcodes




  - Remove legacy linear-scan register allocator and Eval.HHIRXls option







"Eminem" 18-Feb-2014




  - reenabled jemalloc tcache flush for idle threads




  - `array_combine` now performs `__toString` conversion on objects in $`keys`




  - Allow streams in `move_uploaded_file`




  - Fix a bug double closing a UserFile




  - Warn when first arg to `call_user_func` is an object with no `__invoke`




  - kill userland hdf functions




  - Final method reports itself as final




  - Implement IntlCalendar




  - Disallow create_function in RepoAuthoritative mode




  - Case-insensitive check for Accept-Encoding: `gzip`







"Donald Glover" 3-Feb-2014




  - Support for "`::class`"




  - Enable `FCallBuiltin` for HNI functions




  - `json_decode` parity with PHP 5.4




  - Fix race condition with profiling vs. non-profiling functions prologues




  - Implement `ini_get_all()`




  - Begin conversion of runtime options to INI




  - Fix potential PGO-mode crash




  - Fixes and enhancement in IR printing




  - Vector and Set now supported by: `array_{shift,unshift,fill_keys,reverse,flip,size,chunk}`, `min`, and `max`




  - `StableMap` is now an alias for `Map`, which retains insertion order




  - `Map` moved to `HH` namespace




  - Fixes in XLS spilling of SIMD registers




  - Support `SCRIPT_FILENAME` in FastCGI




  - Implement `stream_context_{get,set}_default`




  - Support for Intel VTune Amplifier XE




  - Rewrite of SimpleXML




  - Several HNI conversions, and a helper script




  - Move `Pair` to `HH` namespace




  - Fix `get_included_files` ordering




  - Fix `$_SERVER` and `$_ENV` in FastCGI




  - Update timelib to php 5.5.8




  - Some dead code removal
